version: 2.1
jobs:
  build-alpine:
    docker:
      - image: alpine:3.7
    steps:
      - run:
          name: The First Step
          command: |
            echo 'Hello World!'
            echo 'This is the delivery pipeline'
      - run:
          name: Code Has Arrived
          command: |
            ls -al
            echo '^^^That should look familiar^^^'

  build-hello-world:
    docker:
      - image: cimg/node:14.10.1 # the primary container, where your job's commands are run
        auth:
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
    steps:
      - checkout # check out the code in the project directory
      - run:
          name: hello world 
          command: echo "hello world" # run the `echo` command

  build-hello-parameter:
    parameters:
      org_name:
        type: string
        default: my_org
      repo_name:
        type: string
        default: my_repo
    docker:
      - image: cimg/node:14.10.1 # the primary container, where your job's commands are run
        auth:
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
    steps:
      - checkout # check out the code in the project directory
      - run:
          name: hello world 
          command: echo "hello world" # run the `echo` command
      - run:
          name: hello parameters
          command: echo "Hello parameters  <<parameters.org_name>> / << parameters.repo_name >>"
      
workflows:
  my_workflow:
    jobs:
      - build-alpine
      - build-hello-world
      - build-hello-parameter:
          org_name: my_organization
          repo_name: project2
